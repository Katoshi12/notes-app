import{d as g,c as v,o as u,a as e,t as r,b as N,_ as w,r as _,e as h,f as b,g as x,B as L,n as M,w as A,v as D,h as S,i as U,j as T,F,k as j,T as z,M as G,l as H}from"./index-Bcf5pwSI.js";const O="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%3e%3cpath%20d='M1%209H17M9%201L9%2017'%20stroke='white'%20stroke-width='2'%20stroke-linecap='round'/%3e%3c/svg%3e",q={class:"note"},J={class:"note__title"},K={class:"note__body"},P={class:"text-normal"},Q=g({__name:"Note",props:{id:Number,title:String,text:String},emits:["deleteNote"],setup(m,{emit:c}){const o=m,l=c,d=async()=>{o.id&&(await N.delete(`/notes/${o.id}`).then(i=>console.log(i)),l("deleteNote",o.id))};return(i,s)=>(u(),v("div",q,[e("div",J,[e("h4",null,r(m.title),1)]),e("div",K,[e("p",P,r(m.text),1)]),e("div",{class:"note__footer"},[e("button",{class:"note__delete text-normal",onClick:d}," Удалить ")])]))}}),R=w(Q,[["__scopeId","data-v-ef0b4af0"]]),W={class:"add-note"},X={class:"add-note__field"},Y={key:0,class:"add-note__error text-small"},Z={class:"add-note__field"},ee={key:0,class:"add-note__error text-small"},te={key:0,class:"add-note__error text-small"},I=64,$=255,se=g({__name:"AddNote",emits:["noteAdded"],setup(m,{emit:c}){const o=c,l=_(""),d=_(""),i=_(null),s=_(null),a=_(""),n=h(()=>l.value.length),k=h(()=>d.value.length),C=h(()=>n.value<=I),B=h(()=>k.value<=$),E=async()=>{i.value=null,s.value=null,a.value="";const V={title:l.value,content:d.value};await N.post("/notes",V).then(t=>{o("noteAdded",t.data),l.value="",d.value=""}).catch(t=>{if(t.response){const{message:p,status:y}=t.response.data;p.forEach(f=>{f.includes("Заголовок")&&(i.value=f),f.includes("Содержимое")&&(s.value=f),(y===400||y===401)&&(a.value=f)})}})};return(V,t)=>(u(),v("section",W,[t[4]||(t[4]=e("h2",{class:"add-note__title"},"Добавление заметки",-1)),e("form",{onSubmit:S(E,["prevent"]),class:"add-note__container"},[e("div",X,[x(L,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=p=>l.value=p),label:"Название",placeholder:"Введите название"},null,8,["modelValue"]),e("span",{class:M(["add-note__counter text-small",{"add-note__error-text":!C.value}])},r(n.value)+"/"+r(I),3),i.value?(u(),v("span",Y,r(i.value),1)):b("",!0)]),e("div",Z,[t[2]||(t[2]=e("label",{class:"text-small"},"Описание",-1)),A(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=p=>d.value=p),placeholder:"Введите текст заметки",class:"add-note__textarea text-small"},null,512),[[D,d.value]]),e("span",{class:M(["add-note__counter text-small",{"add-note__error-text":!B.value}])},r(k.value)+"/"+r($),3),s.value?(u(),v("span",ee,r(s.value),1)):b("",!0)]),t[3]||(t[3]=e("div",{class:"add-note__footer"},[e("button",{class:"btn text-normal btn-mob",type:"submit"}," Добавить ")],-1)),a.value?(u(),v("div",te,r(a.value),1)):b("",!0)],32)]))}}),ae=w(se,[["__scopeId","data-v-0a0935e7"]]),oe={class:"dashboard"},ne=g({__name:"Dashboard",setup(m){const c=_(!1),o=_([]),l=async()=>{try{const s=await N.get("/notes");o.value=s.data}catch(s){console.error("Ошибка получения заметок:",s)}},d=s=>{o.value=o.value.filter(a=>a.id!==s)},i=s=>{o.value.push(s),c.value=!1};return U(()=>{l()}),(s,a)=>(u(),v("section",oe,[e("button",{onClick:a[0]||(a[0]=n=>c.value=!0),class:"add-note-btn"},a[2]||(a[2]=[e("img",{src:O,alt:"Добавить заметку"},null,-1)])),x(z,{name:"fade",tag:"div",class:"notes-container"},{default:T(()=>[(u(!0),v(F,null,j(o.value,n=>(u(),H(R,{key:n.id,id:n.id,title:n.title,text:n.content,onDeleteNote:d},null,8,["id","title","text"]))),128))]),_:1}),x(G,{modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=n=>c.value=n)},{default:T(()=>[x(ae,{onNoteAdded:i})]),_:1},8,["modelValue"])]))}}),de=w(ne,[["__scopeId","data-v-6bc19ae2"]]);export{de as default};
